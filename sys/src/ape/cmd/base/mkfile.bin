APEXPROOT=../../../../..
APE=$APEXPROOT/sys/src/ape
<$APE/config

LIB=libutil.a$O libutf.a$O $APEXPROOT/$objtype/lib/ape/libap.a
TARG= \
		basename\
		cut\
		dirname\
		false\
#		find\
		kill\
#		ls\
		printf\
		true\
		tsort\
		uname\
#		which\
		xargs\
		yes

BIN=$APEXPROOT/$objtype/bin/ape
<$APEXPROOT/sys/src/cmd/mkmany

SBASESRC=../../../external/sbase

CC=pcc
LD=pcc

CFLAGS=-c -D_POSIX_SOURCE

CPPFLAGS =\
	-D_DEFAULT_SOURCE \
	-D_NETBSD_SOURCE \
	-D_BSD_SOURCE \
	-D_XOPEN_SOURCE=700 \
	-D_FILE_OFFSET_BITS=64

SBASE_CFLAGS=-c $CPPFLAGS -I$SBASESRC -I$SBASESRC/libutil -I$SBASESRC/../gnulib -D_POSIX_SOURCE -D_BSD_EXTENSION \
		-D_LIMITS_EXTENSION -D_RESEARCH_SOURCE -DS_ISVTX=S_IROTH -DSIGURG=24

%.$O: $SBASESRC/%.c
	$CC $SBASE_CFLAGS $SBASESRC/$stem.c

install:V:
	mk -f mkfile.bin all
	for (i in $TARG)
		@{ cp $O.$i $BIN/$i }
	mkdir -p $APEXPROOT/sys/man/1
	for (i in $TARG)
		@{ cp $SBASESRC/$i.1 $APEXPROOT/sys/man/1/$i }


