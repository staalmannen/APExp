APE=/sys/src/ape
<$APE/config

LIB=libtcl.a$O

OFILES=\
	plan9compat.$O\
	tclUnixChan.$O\
	tclUnixCompat.$O\
	tclUnixEvent.$O\
	tclUnixFCmd.$O\
	tclUnixFile.$O\
	tclUnixInit.$O\
	tclUnixNotfy.$O\
	tclUnixPipe.$O\
	tclUnixSock.$O\
#	tclUnixTest.$O\
	tclUnixThrd.$O\
	tclUnixTime.$O\
# generic \
	regcomp.$O\
	regerror.$O\
	regexec.$O\
	regfree.$O\
	tclAlloc.$O\
	tclAsync.$O\
	tclBasic.$O\
	tclBinary.$O\
	tclCkalloc.$O\
	tclClock.$O\
	tclCmdAH.$O\
	tclCmdIL.$O\
	tclCmdMZ.$O\
	tclCompCmds.$O\
	tclCompExpr.$O\
	tclCompile.$O\
	tclConfig.$O\
	tclDate.$O\
	tclDictObj.$O\
	tclEncoding.$O\
	tclEnv.$O\
	tclEvent.$O\
	tclExecute.$O\
	tclFCmd.$O\
	tclFileName.$O\
	tclGet.$O\
	tclHash.$O\
	tclHistory.$O\
	tclIO.$O\
	tclIOCmd.$O\
	tclIOGT.$O\
	tclIORChan.$O\
	tclIOSock.$O\
	tclIOUtil.$O\
	tclIndexObj.$O\
	tclInterp.$O\
	tclLink.$O\
	tclListObj.$O\
	tclLiteral.$O\
	tclLoad.$O\
	tclLoadNone.$O\
	tclMain.$O\
	tclNamesp.$O\
	tclNotify.$O\
	tclObj.$O\
	tclPanic.$O\
	tclParse.$O\
	tclPathObj.$O\
	tclPipe.$O\
	tclPkg.$O\
	tclPkgConfig.$O\
	tclPosixStr.$O\
	tclPreserve.$O\
	tclProc.$O\
	tclRegexp.$O\
	tclResolve.$O\
	tclResult.$O\
	tclScan.$O\
	tclStrToD.$O\
	tclStringObj.$O\
	tclStubInit.$O\
	tclStubLib.$O\
	tclTest.$O\
	tclTestObj.$O\
	tclTestProcBodyObj.$O\
	tclThread.$O\
	tclThreadAlloc.$O\
	tclThreadJoin.$O\
	tclThreadStorage.$O\
	tclThreadTest.$O\
	tclTimer.$O\
	tclTomMathInterface.$O\
	tclTrace.$O\
	tclUniData.$O\
	tclUtf.$O\
	tclUtil.$O\
	tclVar.$O\
# libtommath \
	bn_fast_s_mp_mul_digs.$O\
	bn_fast_s_mp_sqr.$O\
	bn_mp_add.$O\
	bn_mp_add_d.$O\
	bn_mp_and.$O\
	bn_mp_clamp.$O\
	bn_mp_clear.$O\
	bn_mp_clear_multi.$O\
	bn_mp_cmp.$O\
	bn_mp_cmp_d.$O\
	bn_mp_cmp_mag.$O\
	bn_mp_copy.$O\
	bn_mp_count_bits.$O\
	bn_mp_div.$O\
	bn_mp_div_2.$O\
	bn_mp_div_2d.$O\
	bn_mp_div_3.$O\
	bn_mp_div_d.$O\
	bn_mp_exch.$O\
	bn_mp_expt_d.$O\
	bn_mp_grow.$O\
	bn_mp_init.$O\
	bn_mp_init_copy.$O\
	bn_mp_init_multi.$O\
	bn_mp_init_set.$O\
	bn_mp_init_size.$O\
	bn_mp_karatsuba_mul.$O\
	bn_mp_karatsuba_sqr.$O\
	bn_mp_lshd.$O\
	bn_mp_mod.$O\
	bn_mp_mod_2d.$O\
	bn_mp_mul.$O\
	bn_mp_mul_2.$O\
	bn_mp_mul_2d.$O\
	bn_mp_mul_d.$O\
	bn_mp_neg.$O\
	bn_mp_or.$O\
	bn_mp_radix_size.$O\
	bn_mp_radix_smap.$O\
	bn_mp_read_radix.$O\
	bn_mp_rshd.$O\
	bn_mp_set.$O\
	bn_mp_shrink.$O\
	bn_mp_sqr.$O\
	bn_mp_sqrt.$O\
	bn_mp_sub.$O\
	bn_mp_sub_d.$O\
	bn_mp_to_unsigned_bin.$O\
	bn_mp_to_unsigned_bin_n.$O\
	bn_mp_toom_mul.$O\
	bn_mp_toom_sqr.$O\
	bn_mp_toradix_n.$O\
	bn_mp_unsigned_bin_size.$O\
	bn_mp_xor.$O\
	bn_mp_zero.$O\
	bn_reverse.$O\
	bn_s_mp_add.$O\
	bn_s_mp_mul_digs.$O\
	bn_s_mp_sqr.$O\
	bn_s_mp_sub.$O\
	bncore.$O\

HFILES=\
	plan9/tclConfig.h\

</sys/src/cmd/mklib

CFLAGS=-FVp -c -Iplan9 -Igeneric -Iunix -Ilibtommath -DHAVE_TCL_CONFIG_H -DPLAN9

%.$O: plan9/%.c
	$CC $CFLAGS plan9/$stem.c

%.$O: libtommath/%.c
	$CC $CFLAGS libtommath/$stem.c

%.$O: generic/%.c
	$CC $CFLAGS generic/$stem.c

%.$O: unix/%.c
	$CC $CFLAGS unix/$stem.c


